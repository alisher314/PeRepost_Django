{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ news.news_title }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body class="bg-dark text-white">

    <header class="p-3 mb-3 border-bottom bg-dark navbar-dark">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                    <img src="{% static 'logo.png' %}" alt="Ваш логотип" width="250" height="32" class="me-2">
                </a>
                <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                <input type="search" class="form-control" placeholder="Поиск новостей..." aria-label="Поиск новостей" style="background-color: #505050; color: white;">
                </form>
            </div>
        </div>
    </header>

    <main class="container mt-5">
        <h1 class="mb-4">{{ news.news_title }}</h1>
        <p class="lead">{{ news.added_date|date:"j E Y" }}</p>
        <hr>
        <img src="{{ news.news_photo.url }}" class="img-fluid rounded mb-4" alt="{{ news.news_title }}">
        <p>{{ news.news_des }}</p>
    </main>

<hr class="border-secondary mt-5">
<h4>Комментарии</h4>

<!-- Список комментариев -->
{% if comments %}
    {% for comment in comments %}
        <div class="mb-3 p-3 bg-secondary rounded">
            <strong class="text-danger">{{ comment.author.username }}</strong> <small class="text-muted">{{ comment.created_at|date:"d.m.Y H:i" }}</small>
            <p class="mb-0">{{ comment.content }}</p>
        </div>
    {% endfor %}
{% else %}
    <p class="text-muted">Комментариев пока нет. Будьте первым!</p>
{% endif %}

<!-- Форма для добавления комментария -->
{% if user.is_authenticated %}
    <form method="post" class="mt-4">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-light mt-2">Оставить комментарий</button>
    </form>
{% else %}
    <p class="mt-3">Чтобы оставить комментарий, <a href="{% url 'login' %}">войдите</a> в систему.</p>
{% endif %}

</body>
</html>